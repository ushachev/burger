// const humbButton = document.querySelector(".humburger-menu-btn");
// const template = document.querySelector("#overlay-menu").innerHTML;
// const section = document.querySelector(".start");

// const overlayMenu = createMenu(template);

// // humbButton.addEventListener('click', function() {
// // 	overlayMenu.open();
// // 	this.classList.toggle('humburger-menu-btn_clicked');
// // });

// function createMenu(templateIn) {
// 	let tempBlock = document.createElement('div');

// 	tempBlock.innerHTML = templateIn;

// 	let closeElem = tempBlock.querySelector(".humburger-menu-btn");
// 	let menuElem = tempBlock.querySelector(".overlay-menu");

// 	tempBlock = null;

// 	menuElem.addEventListener('click', function(e) {
// 		let target = e.target;
// 		if (target.className === 'nav-menu__link') {
// 			closeElem.click();
// 		}
// 		if (target === menuElem) {
// 			closeElem.classList.toggle('humburger-menu-btn_clicked');
// 		}
// 	})

// 	closeElem.addEventListener('click', function() {
// 		section.removeChild(menuElem);
// 		humbButton.classList.toggle('humburger-menu-btn_clicked');
// 	})

// 	return {
// 		open() {
// 			section.appendChild(menuElem);
// 		}
// 	} 
// }
// ============================================

let overlay = (function(options) {
	let button = document.querySelector(options.button);
	let overlay = document.querySelector(options.overlay);
	let menuItems = overlay.querySelectorAll(".nav-menu__item");

	let counter = 0;

	let _menuAnimation = function() {
		menuItems[counter].classList.toggle("nav-menu__item_overlay");
		counter++;
		if (counter < menuItems.length) {
			setTimeout(_menuAnimation, 100);
		} else {
			counter = 0;
		}
		// (counter < menuItems.length) ? setTimeout(_menuAnimation, 100) : counter = 0;
	}

	let _toggleOverlay = function() {
		document.querySelector("body").classList.toggle("disabled-onepage-scroll");
		button.classList.toggle("humburger-menu-btn_clicked");
		overlay.classList.toggle("header_overlay");
		_menuAnimation();
	}

	let addListeners = function() {
		button.addEventListener('click', _toggleOverlay);
		button.addEventListener('keydown', function(e) {
			e.preventDefault();
		})
		overlay.addEventListener('click', function(e) {
			if (e.target.className === 'nav-menu__link' && 
				button.classList.contains("humburger-menu-btn_clicked")) {
				_toggleOverlay();
			}
		});
	}

	return {
		init: addListeners
	};
})({
	button: ".humburger-menu-btn",
	overlay: ".header"
})

overlay.init();

// ==============================

let accordeon = (function(options) {
	let accordBlock = document.querySelector(options.block);
	let isClicked = false;
	let isAnimOver = true;

	let _toggleAccordeon = function(elem) {
		if (isClicked) {
			let activeItem = accordBlock.querySelector("." + options.item);
			activeItem.classList.remove(options.item);
			activeItem.querySelector("." + options.content).style.height = 0;
		}
		elem.classList.toggle(options.item);
		let elemContent = elem.querySelector("." + options.content);
		elemContent.style.height = elemContent.scrollHeight + "px";
		isClicked = true;
	}

	let addListener = function() {
		accordBlock.addEventListener('click', function(e) {
			let itemClicked = e.target.parentElement;
			let isTrigger = (e.target.className === options.trigger);
			if (isTrigger && isAnimOver
				&& itemClicked.classList.contains(options.item)) {
					itemClicked.classList.remove(options.item);
					itemClicked.querySelector("." + options.content).style.height = 0;
					isClicked = false;
					isAnimOver = false;
					setTimeout(function() {isAnimOver = true;}, 600);
			} else if (isTrigger && isAnimOver) {
				_toggleAccordeon(itemClicked);
				isAnimOver = false;
				setTimeout(function() {isAnimOver = true;}, 600);
			}
		})
	}

	return {
		init: addListener
	};
})({
	block: ".accordeon",
	trigger: "accordeon__item-title",
	item: "accordeon__item_active",
	content: "accordeon__content"
})

accordeon.init();

// ======================================

let accordeonHor = (function(options) {
	let accordBlock = document.querySelector(options.block);
	let triggerWidth;
	let isClicked = false;
	let isPhone = window.innerWidth <= 480;
	if (isPhone) {
		accordBlock.style.left = accordBlock.getBoundingClientRect().left + 'px';
	}

	let _widthContent = function() {
		let itemQuantity = 3;
		if (isPhone) {itemQuantity = 1;}
		let computedWidth = window.innerWidth - itemQuantity * triggerWidth;

		return computedWidth > 540 ? 540 : computedWidth;
	}

	let _toggleAccordeon = function(elem) {
		let initialLeft = window.innerWidth - 3 * triggerWidth + 'px';
		if (isClicked) {
			let isOpenedItemClicked = elem.classList.contains(options.item);
			let activeItem = accordBlock.querySelector("." + options.item);
			activeItem.classList.toggle(options.item);
			activeItem.querySelector('.' + options.content).style.width = 0;
			isClicked = false;
			if (isOpenedItemClicked) {
				if (isPhone) {
					accordBlock.style.left = initialLeft;}
				return;
			}
		}
		elem.classList.toggle(options.item);
		let elemContent = elem.querySelector('.' + options.content);
		elemContent.style.width = _widthContent() + 'px';
		if (isPhone) {
			accordBlock.style.left = [].indexOf.call(accordBlock.children, elem) * 
			-(triggerWidth) + 'px';
		}
		isClicked = true;
	}

	let addListeners = function() {
		accordBlock.addEventListener('click', function(e) {
			let target = e.target.closest('.' + options.trigger);
			isPhone = window.innerWidth <= 480;
			triggerWidth = parseInt(getComputedStyle(accordBlock
				.querySelector('.' + options.trigger)).width);
			if (target) {
				_toggleAccordeon(target.parentElement);}
		})

		let crosses = accordBlock.querySelectorAll('.accordeon-hor__btn-close');
		for (let i = 0; i < crosses.length; i++) {
			crosses[i].addEventListener('click', function(e) {
			_toggleAccordeon(crosses[i].closest('.' + options.item))
		})
		}
		
	}

	return {init: addListeners};
})({
	block: ".accordeon-hor",
	trigger: "accordeon-hor__title",
	item: "accordeon-hor__item_active",
	content: "accordeon-hor__container"
})

accordeonHor.init();

// =====================================================

const moreButtons = document.querySelectorAll(".review__more-btn");
const templateRev = document.querySelector("#overlay-review").innerHTML;
const sectionRev = document.querySelector(".review");

const overlayReview = createReview(templateRev);

for (var i = 0; i < moreButtons.length; i++) {
	moreButtons[i].addEventListener('click', function(e) {
		let target = e.target.closest(".review__more-btn");
		if (target) {
			document.querySelector("body").classList.add("disabled-onepage-scroll");
			overlayReview.open(target.parentElement);
		}
	})
}

function createReview(templateIn) {
	let tempBlock = document.createElement('div');

	tempBlock.innerHTML = templateIn;

	let closeElem = tempBlock.querySelector(".overlay-review__btn-close");
	let overlayElem = tempBlock.querySelector(".overlay-review");
	let authorElem = tempBlock.querySelector(".overlay-review__title");
	let textElem = tempBlock.querySelector(".overlay-review__text");

	tempBlock = null;

	overlayElem.addEventListener('click', function(e) {
		if (e.target === overlayElem) {
			closeElem.click();
		}
	})

	closeElem.addEventListener('click', function() {
		document.querySelector("body").classList.remove("disabled-onepage-scroll");
		sectionRev.removeChild(overlayElem);
	})

	return {
		open(item) {
			sectionRev.appendChild(overlayElem);
			authorElem.innerHTML = item.querySelector(".review__author").innerHTML;
			textElem.innerHTML = item.querySelector(".review__text").innerHTML;
		}
	}
}

// ==============================================

const owlBurger = $('.owl-carousel');

$(document).ready(function(){
	owlBurger.owlCarousel({
		loop: true,
		items: 1
	});
});

$('.burgers__prev').click(function() {
    owlBurger.trigger('prev.owl.carousel');
})

$('.burgers__next').click(function() {
    owlBurger.trigger('next.owl.carousel');
})

// =============================================

$(".main").onepage_scroll({
   sectionContainer: "section",     // sectionContainer accepts any kind of selector in case you don't want to use section
   easing: "ease",                  // Easing options accepts the CSS3 easing animation such "ease", "linear", "ease-in",
                                    // "ease-out", "ease-in-out", or even cubic bezier value such as "cubic-bezier(0.175, 0.885, 0.420, 1.310)"
   animationTime: 1000,             // AnimationTime let you define how long each section takes to animate
   pagination: true,                // You can either show or hide the pagination. Toggle true for show, false for hide.
   updateURL: false,                // Toggle this true if you want the URL to be updated automatically when the user scroll to each page.
   beforeMove: function(index) {},  // This option accepts a callback function. The function will be called before the page moves.
   afterMove: function(index) {},   // This option accepts a callback function. The function will be called after the page moves.
   loop: false,                     // You can have the page loop back to the top/bottom when the user navigates at up/down on the first/last page.
   keyboard: true,                  // You can activate the keyboard controls
   responsiveFallback: false,        // You can fallback to normal page scroll by defining the width of the browser in which
                                    // you want the responsive fallback to be triggered. For example, set this to 600 and whenever
                                    // the browser's width is less than 600, the fallback will kick in.
   direction: "vertical"            // You can now define the direction of the One Page Scroll animation. Options available are "vertical" and "horizontal". The default value is "vertical".  
});

// ==============================================

let navigation = function() {
	let startPage = document.querySelector('.start');

	startPage.addEventListener('click', function(e) {
		if (e.target.className === 'nav-menu__link' || 
			e.target.classList.contains('main-nav__btn') ||
			e.target.classList.contains('start__page-down')) {
			e.preventDefault();
			$('.main').moveTo(e.target.dataset.index);
		}
	})
}

navigation();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGNvbnN0IGh1bWJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmh1bWJ1cmdlci1tZW51LWJ0blwiKTtcclxuLy8gY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI292ZXJsYXktbWVudVwiKS5pbm5lckhUTUw7XHJcbi8vIGNvbnN0IHNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnN0YXJ0XCIpO1xyXG5cclxuLy8gY29uc3Qgb3ZlcmxheU1lbnUgPSBjcmVhdGVNZW51KHRlbXBsYXRlKTtcclxuXHJcbi8vIC8vIGh1bWJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuLy8gLy8gXHRvdmVybGF5TWVudS5vcGVuKCk7XHJcbi8vIC8vIFx0dGhpcy5jbGFzc0xpc3QudG9nZ2xlKCdodW1idXJnZXItbWVudS1idG5fY2xpY2tlZCcpO1xyXG4vLyAvLyB9KTtcclxuXHJcbi8vIGZ1bmN0aW9uIGNyZWF0ZU1lbnUodGVtcGxhdGVJbikge1xyXG4vLyBcdGxldCB0ZW1wQmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHJcbi8vIFx0dGVtcEJsb2NrLmlubmVySFRNTCA9IHRlbXBsYXRlSW47XHJcblxyXG4vLyBcdGxldCBjbG9zZUVsZW0gPSB0ZW1wQmxvY2sucXVlcnlTZWxlY3RvcihcIi5odW1idXJnZXItbWVudS1idG5cIik7XHJcbi8vIFx0bGV0IG1lbnVFbGVtID0gdGVtcEJsb2NrLnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheS1tZW51XCIpO1xyXG5cclxuLy8gXHR0ZW1wQmxvY2sgPSBudWxsO1xyXG5cclxuLy8gXHRtZW51RWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuLy8gXHRcdGxldCB0YXJnZXQgPSBlLnRhcmdldDtcclxuLy8gXHRcdGlmICh0YXJnZXQuY2xhc3NOYW1lID09PSAnbmF2LW1lbnVfX2xpbmsnKSB7XHJcbi8vIFx0XHRcdGNsb3NlRWxlbS5jbGljaygpO1xyXG4vLyBcdFx0fVxyXG4vLyBcdFx0aWYgKHRhcmdldCA9PT0gbWVudUVsZW0pIHtcclxuLy8gXHRcdFx0Y2xvc2VFbGVtLmNsYXNzTGlzdC50b2dnbGUoJ2h1bWJ1cmdlci1tZW51LWJ0bl9jbGlja2VkJyk7XHJcbi8vIFx0XHR9XHJcbi8vIFx0fSlcclxuXHJcbi8vIFx0Y2xvc2VFbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbi8vIFx0XHRzZWN0aW9uLnJlbW92ZUNoaWxkKG1lbnVFbGVtKTtcclxuLy8gXHRcdGh1bWJCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnaHVtYnVyZ2VyLW1lbnUtYnRuX2NsaWNrZWQnKTtcclxuLy8gXHR9KVxyXG5cclxuLy8gXHRyZXR1cm4ge1xyXG4vLyBcdFx0b3BlbigpIHtcclxuLy8gXHRcdFx0c2VjdGlvbi5hcHBlbmRDaGlsZChtZW51RWxlbSk7XHJcbi8vIFx0XHR9XHJcbi8vIFx0fSBcclxuLy8gfVxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxubGV0IG92ZXJsYXkgPSAoZnVuY3Rpb24ob3B0aW9ucykge1xyXG5cdGxldCBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9wdGlvbnMuYnV0dG9uKTtcclxuXHRsZXQgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob3B0aW9ucy5vdmVybGF5KTtcclxuXHRsZXQgbWVudUl0ZW1zID0gb3ZlcmxheS5xdWVyeVNlbGVjdG9yQWxsKFwiLm5hdi1tZW51X19pdGVtXCIpO1xyXG5cclxuXHRsZXQgY291bnRlciA9IDA7XHJcblxyXG5cdGxldCBfbWVudUFuaW1hdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0bWVudUl0ZW1zW2NvdW50ZXJdLmNsYXNzTGlzdC50b2dnbGUoXCJuYXYtbWVudV9faXRlbV9vdmVybGF5XCIpO1xyXG5cdFx0Y291bnRlcisrO1xyXG5cdFx0aWYgKGNvdW50ZXIgPCBtZW51SXRlbXMubGVuZ3RoKSB7XHJcblx0XHRcdHNldFRpbWVvdXQoX21lbnVBbmltYXRpb24sIDEwMCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjb3VudGVyID0gMDtcclxuXHRcdH1cclxuXHRcdC8vIChjb3VudGVyIDwgbWVudUl0ZW1zLmxlbmd0aCkgPyBzZXRUaW1lb3V0KF9tZW51QW5pbWF0aW9uLCAxMDApIDogY291bnRlciA9IDA7XHJcblx0fVxyXG5cclxuXHRsZXQgX3RvZ2dsZU92ZXJsYXkgPSBmdW5jdGlvbigpIHtcclxuXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpLmNsYXNzTGlzdC50b2dnbGUoXCJkaXNhYmxlZC1vbmVwYWdlLXNjcm9sbFwiKTtcclxuXHRcdGJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiaHVtYnVyZ2VyLW1lbnUtYnRuX2NsaWNrZWRcIik7XHJcblx0XHRvdmVybGF5LmNsYXNzTGlzdC50b2dnbGUoXCJoZWFkZXJfb3ZlcmxheVwiKTtcclxuXHRcdF9tZW51QW5pbWF0aW9uKCk7XHJcblx0fVxyXG5cclxuXHRsZXQgYWRkTGlzdGVuZXJzID0gZnVuY3Rpb24oKSB7XHJcblx0XHRidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfdG9nZ2xlT3ZlcmxheSk7XHJcblx0XHRidXR0b24uYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0fSlcclxuXHRcdG92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcblx0XHRcdGlmIChlLnRhcmdldC5jbGFzc05hbWUgPT09ICduYXYtbWVudV9fbGluaycgJiYgXHJcblx0XHRcdFx0YnV0dG9uLmNsYXNzTGlzdC5jb250YWlucyhcImh1bWJ1cmdlci1tZW51LWJ0bl9jbGlja2VkXCIpKSB7XHJcblx0XHRcdFx0X3RvZ2dsZU92ZXJsYXkoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4ge1xyXG5cdFx0aW5pdDogYWRkTGlzdGVuZXJzXHJcblx0fTtcclxufSkoe1xyXG5cdGJ1dHRvbjogXCIuaHVtYnVyZ2VyLW1lbnUtYnRuXCIsXHJcblx0b3ZlcmxheTogXCIuaGVhZGVyXCJcclxufSlcclxuXHJcbm92ZXJsYXkuaW5pdCgpO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5sZXQgYWNjb3JkZW9uID0gKGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuXHRsZXQgYWNjb3JkQmxvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9wdGlvbnMuYmxvY2spO1xyXG5cdGxldCBpc0NsaWNrZWQgPSBmYWxzZTtcclxuXHRsZXQgaXNBbmltT3ZlciA9IHRydWU7XHJcblxyXG5cdGxldCBfdG9nZ2xlQWNjb3JkZW9uID0gZnVuY3Rpb24oZWxlbSkge1xyXG5cdFx0aWYgKGlzQ2xpY2tlZCkge1xyXG5cdFx0XHRsZXQgYWN0aXZlSXRlbSA9IGFjY29yZEJsb2NrLnF1ZXJ5U2VsZWN0b3IoXCIuXCIgKyBvcHRpb25zLml0ZW0pO1xyXG5cdFx0XHRhY3RpdmVJdGVtLmNsYXNzTGlzdC5yZW1vdmUob3B0aW9ucy5pdGVtKTtcclxuXHRcdFx0YWN0aXZlSXRlbS5xdWVyeVNlbGVjdG9yKFwiLlwiICsgb3B0aW9ucy5jb250ZW50KS5zdHlsZS5oZWlnaHQgPSAwO1xyXG5cdFx0fVxyXG5cdFx0ZWxlbS5jbGFzc0xpc3QudG9nZ2xlKG9wdGlvbnMuaXRlbSk7XHJcblx0XHRsZXQgZWxlbUNvbnRlbnQgPSBlbGVtLnF1ZXJ5U2VsZWN0b3IoXCIuXCIgKyBvcHRpb25zLmNvbnRlbnQpO1xyXG5cdFx0ZWxlbUNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gZWxlbUNvbnRlbnQuc2Nyb2xsSGVpZ2h0ICsgXCJweFwiO1xyXG5cdFx0aXNDbGlja2VkID0gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdGxldCBhZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0YWNjb3JkQmxvY2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcblx0XHRcdGxldCBpdGVtQ2xpY2tlZCA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XHJcblx0XHRcdGxldCBpc1RyaWdnZXIgPSAoZS50YXJnZXQuY2xhc3NOYW1lID09PSBvcHRpb25zLnRyaWdnZXIpO1xyXG5cdFx0XHRpZiAoaXNUcmlnZ2VyICYmIGlzQW5pbU92ZXJcclxuXHRcdFx0XHQmJiBpdGVtQ2xpY2tlZC5jbGFzc0xpc3QuY29udGFpbnMob3B0aW9ucy5pdGVtKSkge1xyXG5cdFx0XHRcdFx0aXRlbUNsaWNrZWQuY2xhc3NMaXN0LnJlbW92ZShvcHRpb25zLml0ZW0pO1xyXG5cdFx0XHRcdFx0aXRlbUNsaWNrZWQucXVlcnlTZWxlY3RvcihcIi5cIiArIG9wdGlvbnMuY29udGVudCkuc3R5bGUuaGVpZ2h0ID0gMDtcclxuXHRcdFx0XHRcdGlzQ2xpY2tlZCA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0aXNBbmltT3ZlciA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtpc0FuaW1PdmVyID0gdHJ1ZTt9LCA2MDApO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGlzVHJpZ2dlciAmJiBpc0FuaW1PdmVyKSB7XHJcblx0XHRcdFx0X3RvZ2dsZUFjY29yZGVvbihpdGVtQ2xpY2tlZCk7XHJcblx0XHRcdFx0aXNBbmltT3ZlciA9IGZhbHNlO1xyXG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7aXNBbmltT3ZlciA9IHRydWU7fSwgNjAwKTtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHR9XHJcblxyXG5cdHJldHVybiB7XHJcblx0XHRpbml0OiBhZGRMaXN0ZW5lclxyXG5cdH07XHJcbn0pKHtcclxuXHRibG9jazogXCIuYWNjb3JkZW9uXCIsXHJcblx0dHJpZ2dlcjogXCJhY2NvcmRlb25fX2l0ZW0tdGl0bGVcIixcclxuXHRpdGVtOiBcImFjY29yZGVvbl9faXRlbV9hY3RpdmVcIixcclxuXHRjb250ZW50OiBcImFjY29yZGVvbl9fY29udGVudFwiXHJcbn0pXHJcblxyXG5hY2NvcmRlb24uaW5pdCgpO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmxldCBhY2NvcmRlb25Ib3IgPSAoZnVuY3Rpb24ob3B0aW9ucykge1xyXG5cdGxldCBhY2NvcmRCbG9jayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob3B0aW9ucy5ibG9jayk7XHJcblx0bGV0IHRyaWdnZXJXaWR0aDtcclxuXHRsZXQgaXNDbGlja2VkID0gZmFsc2U7XHJcblx0bGV0IGlzUGhvbmUgPSB3aW5kb3cuaW5uZXJXaWR0aCA8PSA0ODA7XHJcblx0aWYgKGlzUGhvbmUpIHtcclxuXHRcdGFjY29yZEJsb2NrLnN0eWxlLmxlZnQgPSBhY2NvcmRCbG9jay5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0ICsgJ3B4JztcclxuXHR9XHJcblxyXG5cdGxldCBfd2lkdGhDb250ZW50ID0gZnVuY3Rpb24oKSB7XHJcblx0XHRsZXQgaXRlbVF1YW50aXR5ID0gMztcclxuXHRcdGlmIChpc1Bob25lKSB7aXRlbVF1YW50aXR5ID0gMTt9XHJcblx0XHRsZXQgY29tcHV0ZWRXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoIC0gaXRlbVF1YW50aXR5ICogdHJpZ2dlcldpZHRoO1xyXG5cclxuXHRcdHJldHVybiBjb21wdXRlZFdpZHRoID4gNTQwID8gNTQwIDogY29tcHV0ZWRXaWR0aDtcclxuXHR9XHJcblxyXG5cdGxldCBfdG9nZ2xlQWNjb3JkZW9uID0gZnVuY3Rpb24oZWxlbSkge1xyXG5cdFx0bGV0IGluaXRpYWxMZWZ0ID0gd2luZG93LmlubmVyV2lkdGggLSAzICogdHJpZ2dlcldpZHRoICsgJ3B4JztcclxuXHRcdGlmIChpc0NsaWNrZWQpIHtcclxuXHRcdFx0bGV0IGlzT3BlbmVkSXRlbUNsaWNrZWQgPSBlbGVtLmNsYXNzTGlzdC5jb250YWlucyhvcHRpb25zLml0ZW0pO1xyXG5cdFx0XHRsZXQgYWN0aXZlSXRlbSA9IGFjY29yZEJsb2NrLnF1ZXJ5U2VsZWN0b3IoXCIuXCIgKyBvcHRpb25zLml0ZW0pO1xyXG5cdFx0XHRhY3RpdmVJdGVtLmNsYXNzTGlzdC50b2dnbGUob3B0aW9ucy5pdGVtKTtcclxuXHRcdFx0YWN0aXZlSXRlbS5xdWVyeVNlbGVjdG9yKCcuJyArIG9wdGlvbnMuY29udGVudCkuc3R5bGUud2lkdGggPSAwO1xyXG5cdFx0XHRpc0NsaWNrZWQgPSBmYWxzZTtcclxuXHRcdFx0aWYgKGlzT3BlbmVkSXRlbUNsaWNrZWQpIHtcclxuXHRcdFx0XHRpZiAoaXNQaG9uZSkge1xyXG5cdFx0XHRcdFx0YWNjb3JkQmxvY2suc3R5bGUubGVmdCA9IGluaXRpYWxMZWZ0O31cclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGVsZW0uY2xhc3NMaXN0LnRvZ2dsZShvcHRpb25zLml0ZW0pO1xyXG5cdFx0bGV0IGVsZW1Db250ZW50ID0gZWxlbS5xdWVyeVNlbGVjdG9yKCcuJyArIG9wdGlvbnMuY29udGVudCk7XHJcblx0XHRlbGVtQ29udGVudC5zdHlsZS53aWR0aCA9IF93aWR0aENvbnRlbnQoKSArICdweCc7XHJcblx0XHRpZiAoaXNQaG9uZSkge1xyXG5cdFx0XHRhY2NvcmRCbG9jay5zdHlsZS5sZWZ0ID0gW10uaW5kZXhPZi5jYWxsKGFjY29yZEJsb2NrLmNoaWxkcmVuLCBlbGVtKSAqIFxyXG5cdFx0XHQtKHRyaWdnZXJXaWR0aCkgKyAncHgnO1xyXG5cdFx0fVxyXG5cdFx0aXNDbGlja2VkID0gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdGxldCBhZGRMaXN0ZW5lcnMgPSBmdW5jdGlvbigpIHtcclxuXHRcdGFjY29yZEJsb2NrLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRsZXQgdGFyZ2V0ID0gZS50YXJnZXQuY2xvc2VzdCgnLicgKyBvcHRpb25zLnRyaWdnZXIpO1xyXG5cdFx0XHRpc1Bob25lID0gd2luZG93LmlubmVyV2lkdGggPD0gNDgwO1xyXG5cdFx0XHR0cmlnZ2VyV2lkdGggPSBwYXJzZUludChnZXRDb21wdXRlZFN0eWxlKGFjY29yZEJsb2NrXHJcblx0XHRcdFx0LnF1ZXJ5U2VsZWN0b3IoJy4nICsgb3B0aW9ucy50cmlnZ2VyKSkud2lkdGgpO1xyXG5cdFx0XHRpZiAodGFyZ2V0KSB7XHJcblx0XHRcdFx0X3RvZ2dsZUFjY29yZGVvbih0YXJnZXQucGFyZW50RWxlbWVudCk7fVxyXG5cdFx0fSlcclxuXHJcblx0XHRsZXQgY3Jvc3NlcyA9IGFjY29yZEJsb2NrLnF1ZXJ5U2VsZWN0b3JBbGwoJy5hY2NvcmRlb24taG9yX19idG4tY2xvc2UnKTtcclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgY3Jvc3Nlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRjcm9zc2VzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRfdG9nZ2xlQWNjb3JkZW9uKGNyb3NzZXNbaV0uY2xvc2VzdCgnLicgKyBvcHRpb25zLml0ZW0pKVxyXG5cdFx0fSlcclxuXHRcdH1cclxuXHRcdFxyXG5cdH1cclxuXHJcblx0cmV0dXJuIHtpbml0OiBhZGRMaXN0ZW5lcnN9O1xyXG59KSh7XHJcblx0YmxvY2s6IFwiLmFjY29yZGVvbi1ob3JcIixcclxuXHR0cmlnZ2VyOiBcImFjY29yZGVvbi1ob3JfX3RpdGxlXCIsXHJcblx0aXRlbTogXCJhY2NvcmRlb24taG9yX19pdGVtX2FjdGl2ZVwiLFxyXG5cdGNvbnRlbnQ6IFwiYWNjb3JkZW9uLWhvcl9fY29udGFpbmVyXCJcclxufSlcclxuXHJcbmFjY29yZGVvbkhvci5pbml0KCk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuY29uc3QgbW9yZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnJldmlld19fbW9yZS1idG5cIik7XHJcbmNvbnN0IHRlbXBsYXRlUmV2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvdmVybGF5LXJldmlld1wiKS5pbm5lckhUTUw7XHJcbmNvbnN0IHNlY3Rpb25SZXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJldmlld1wiKTtcclxuXHJcbmNvbnN0IG92ZXJsYXlSZXZpZXcgPSBjcmVhdGVSZXZpZXcodGVtcGxhdGVSZXYpO1xyXG5cclxuZm9yICh2YXIgaSA9IDA7IGkgPCBtb3JlQnV0dG9ucy5sZW5ndGg7IGkrKykge1xyXG5cdG1vcmVCdXR0b25zW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG5cdFx0bGV0IHRhcmdldCA9IGUudGFyZ2V0LmNsb3Nlc3QoXCIucmV2aWV3X19tb3JlLWJ0blwiKTtcclxuXHRcdGlmICh0YXJnZXQpIHtcclxuXHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJvZHlcIikuY2xhc3NMaXN0LmFkZChcImRpc2FibGVkLW9uZXBhZ2Utc2Nyb2xsXCIpO1xyXG5cdFx0XHRvdmVybGF5UmV2aWV3Lm9wZW4odGFyZ2V0LnBhcmVudEVsZW1lbnQpO1xyXG5cdFx0fVxyXG5cdH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVJldmlldyh0ZW1wbGF0ZUluKSB7XHJcblx0bGV0IHRlbXBCbG9jayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cclxuXHR0ZW1wQmxvY2suaW5uZXJIVE1MID0gdGVtcGxhdGVJbjtcclxuXHJcblx0bGV0IGNsb3NlRWxlbSA9IHRlbXBCbG9jay5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXktcmV2aWV3X19idG4tY2xvc2VcIik7XHJcblx0bGV0IG92ZXJsYXlFbGVtID0gdGVtcEJsb2NrLnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheS1yZXZpZXdcIik7XHJcblx0bGV0IGF1dGhvckVsZW0gPSB0ZW1wQmxvY2sucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5LXJldmlld19fdGl0bGVcIik7XHJcblx0bGV0IHRleHRFbGVtID0gdGVtcEJsb2NrLnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheS1yZXZpZXdfX3RleHRcIik7XHJcblxyXG5cdHRlbXBCbG9jayA9IG51bGw7XHJcblxyXG5cdG92ZXJsYXlFbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG5cdFx0aWYgKGUudGFyZ2V0ID09PSBvdmVybGF5RWxlbSkge1xyXG5cdFx0XHRjbG9zZUVsZW0uY2xpY2soKTtcclxuXHRcdH1cclxuXHR9KVxyXG5cclxuXHRjbG9zZUVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNhYmxlZC1vbmVwYWdlLXNjcm9sbFwiKTtcclxuXHRcdHNlY3Rpb25SZXYucmVtb3ZlQ2hpbGQob3ZlcmxheUVsZW0pO1xyXG5cdH0pXHJcblxyXG5cdHJldHVybiB7XHJcblx0XHRvcGVuKGl0ZW0pIHtcclxuXHRcdFx0c2VjdGlvblJldi5hcHBlbmRDaGlsZChvdmVybGF5RWxlbSk7XHJcblx0XHRcdGF1dGhvckVsZW0uaW5uZXJIVE1MID0gaXRlbS5xdWVyeVNlbGVjdG9yKFwiLnJldmlld19fYXV0aG9yXCIpLmlubmVySFRNTDtcclxuXHRcdFx0dGV4dEVsZW0uaW5uZXJIVE1MID0gaXRlbS5xdWVyeVNlbGVjdG9yKFwiLnJldmlld19fdGV4dFwiKS5pbm5lckhUTUw7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5jb25zdCBvd2xCdXJnZXIgPSAkKCcub3dsLWNhcm91c2VsJyk7XHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xyXG5cdG93bEJ1cmdlci5vd2xDYXJvdXNlbCh7XHJcblx0XHRsb29wOiB0cnVlLFxyXG5cdFx0aXRlbXM6IDFcclxuXHR9KTtcclxufSk7XHJcblxyXG4kKCcuYnVyZ2Vyc19fcHJldicpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgb3dsQnVyZ2VyLnRyaWdnZXIoJ3ByZXYub3dsLmNhcm91c2VsJyk7XHJcbn0pXHJcblxyXG4kKCcuYnVyZ2Vyc19fbmV4dCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgb3dsQnVyZ2VyLnRyaWdnZXIoJ25leHQub3dsLmNhcm91c2VsJyk7XHJcbn0pXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiQoXCIubWFpblwiKS5vbmVwYWdlX3Njcm9sbCh7XHJcbiAgIHNlY3Rpb25Db250YWluZXI6IFwic2VjdGlvblwiLCAgICAgLy8gc2VjdGlvbkNvbnRhaW5lciBhY2NlcHRzIGFueSBraW5kIG9mIHNlbGVjdG9yIGluIGNhc2UgeW91IGRvbid0IHdhbnQgdG8gdXNlIHNlY3Rpb25cclxuICAgZWFzaW5nOiBcImVhc2VcIiwgICAgICAgICAgICAgICAgICAvLyBFYXNpbmcgb3B0aW9ucyBhY2NlcHRzIHRoZSBDU1MzIGVhc2luZyBhbmltYXRpb24gc3VjaCBcImVhc2VcIiwgXCJsaW5lYXJcIiwgXCJlYXNlLWluXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFwiZWFzZS1vdXRcIiwgXCJlYXNlLWluLW91dFwiLCBvciBldmVuIGN1YmljIGJlemllciB2YWx1ZSBzdWNoIGFzIFwiY3ViaWMtYmV6aWVyKDAuMTc1LCAwLjg4NSwgMC40MjAsIDEuMzEwKVwiXHJcbiAgIGFuaW1hdGlvblRpbWU6IDEwMDAsICAgICAgICAgICAgIC8vIEFuaW1hdGlvblRpbWUgbGV0IHlvdSBkZWZpbmUgaG93IGxvbmcgZWFjaCBzZWN0aW9uIHRha2VzIHRvIGFuaW1hdGVcclxuICAgcGFnaW5hdGlvbjogdHJ1ZSwgICAgICAgICAgICAgICAgLy8gWW91IGNhbiBlaXRoZXIgc2hvdyBvciBoaWRlIHRoZSBwYWdpbmF0aW9uLiBUb2dnbGUgdHJ1ZSBmb3Igc2hvdywgZmFsc2UgZm9yIGhpZGUuXHJcbiAgIHVwZGF0ZVVSTDogZmFsc2UsICAgICAgICAgICAgICAgIC8vIFRvZ2dsZSB0aGlzIHRydWUgaWYgeW91IHdhbnQgdGhlIFVSTCB0byBiZSB1cGRhdGVkIGF1dG9tYXRpY2FsbHkgd2hlbiB0aGUgdXNlciBzY3JvbGwgdG8gZWFjaCBwYWdlLlxyXG4gICBiZWZvcmVNb3ZlOiBmdW5jdGlvbihpbmRleCkge30sICAvLyBUaGlzIG9wdGlvbiBhY2NlcHRzIGEgY2FsbGJhY2sgZnVuY3Rpb24uIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBiZWZvcmUgdGhlIHBhZ2UgbW92ZXMuXHJcbiAgIGFmdGVyTW92ZTogZnVuY3Rpb24oaW5kZXgpIHt9LCAgIC8vIFRoaXMgb3B0aW9uIGFjY2VwdHMgYSBjYWxsYmFjayBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFmdGVyIHRoZSBwYWdlIG1vdmVzLlxyXG4gICBsb29wOiBmYWxzZSwgICAgICAgICAgICAgICAgICAgICAvLyBZb3UgY2FuIGhhdmUgdGhlIHBhZ2UgbG9vcCBiYWNrIHRvIHRoZSB0b3AvYm90dG9tIHdoZW4gdGhlIHVzZXIgbmF2aWdhdGVzIGF0IHVwL2Rvd24gb24gdGhlIGZpcnN0L2xhc3QgcGFnZS5cclxuICAga2V5Ym9hcmQ6IHRydWUsICAgICAgICAgICAgICAgICAgLy8gWW91IGNhbiBhY3RpdmF0ZSB0aGUga2V5Ym9hcmQgY29udHJvbHNcclxuICAgcmVzcG9uc2l2ZUZhbGxiYWNrOiBmYWxzZSwgICAgICAgIC8vIFlvdSBjYW4gZmFsbGJhY2sgdG8gbm9ybWFsIHBhZ2Ugc2Nyb2xsIGJ5IGRlZmluaW5nIHRoZSB3aWR0aCBvZiB0aGUgYnJvd3NlciBpbiB3aGljaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB5b3Ugd2FudCB0aGUgcmVzcG9uc2l2ZSBmYWxsYmFjayB0byBiZSB0cmlnZ2VyZWQuIEZvciBleGFtcGxlLCBzZXQgdGhpcyB0byA2MDAgYW5kIHdoZW5ldmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBicm93c2VyJ3Mgd2lkdGggaXMgbGVzcyB0aGFuIDYwMCwgdGhlIGZhbGxiYWNrIHdpbGwga2ljayBpbi5cclxuICAgZGlyZWN0aW9uOiBcInZlcnRpY2FsXCIgICAgICAgICAgICAvLyBZb3UgY2FuIG5vdyBkZWZpbmUgdGhlIGRpcmVjdGlvbiBvZiB0aGUgT25lIFBhZ2UgU2Nyb2xsIGFuaW1hdGlvbi4gT3B0aW9ucyBhdmFpbGFibGUgYXJlIFwidmVydGljYWxcIiBhbmQgXCJob3Jpem9udGFsXCIuIFRoZSBkZWZhdWx0IHZhbHVlIGlzIFwidmVydGljYWxcIi4gIFxyXG59KTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmxldCBuYXZpZ2F0aW9uID0gZnVuY3Rpb24oKSB7XHJcblx0bGV0IHN0YXJ0UGFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdGFydCcpO1xyXG5cclxuXHRzdGFydFBhZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcblx0XHRpZiAoZS50YXJnZXQuY2xhc3NOYW1lID09PSAnbmF2LW1lbnVfX2xpbmsnIHx8IFxyXG5cdFx0XHRlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21haW4tbmF2X19idG4nKSB8fFxyXG5cdFx0XHRlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3N0YXJ0X19wYWdlLWRvd24nKSkge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdCQoJy5tYWluJykubW92ZVRvKGUudGFyZ2V0LmRhdGFzZXQuaW5kZXgpO1xyXG5cdFx0fVxyXG5cdH0pXHJcbn1cclxuXHJcbm5hdmlnYXRpb24oKTsiXX0=
